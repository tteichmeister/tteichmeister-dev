---
import Card from "./Card.astro";

const { entry } = Astro.props;

const getBaseLink = (type: string) => {
  if (type === "project") {
    return "projects";
  } else if (type === "work") {
    return "work";
  } else {
    throw new Error(`Unknown type: ${type}`);
  }
};

const getSubtitle = (entry: any) => {
  let subtitle = "";
  if (entry.data.type === "work") {
    subtitle = `${entry.data.start} - ${entry.data.end ?? "now"}`;
  } else {
    subtitle = `${entry.data.start} ${entry.data.end ? " - " + entry.data.end : ""}`;
  }

  subtitle =
    subtitle + `${entry.data.location ? " | " + entry.data.location : ""}`;
  return subtitle;
};
---

<Card
  title={entry.data.title}
  link={`/${getBaseLink(entry.data.type)}/${entry.slug}`}
  shortDescription={entry.data.description}
  subtitle={getSubtitle(entry)}
/>
